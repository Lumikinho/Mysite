---
import "../styles/global.css";
---

<html lang="pt-br">
  <meta charset="UTF-8" />
  <body class="min-h-screen bg-zinc-950 text-zinc-100">
    <!-- NAVBAR -->
    <header
      class="sticky top-0 z-40 border-b border-zinc-800 bg-zinc-950/90 backdrop-blur"
    >
      <nav
        class="mx-auto flex h-14 max-w-5xl items-center justify-between px-4 md:px-6"
      >
        <!-- Logo / nome -->
        <a href="/" class="flex items-center gap-2">
          <div class="h-8 w-8 rounded-full bg-zinc-800 overflow-hidden">
            <img
              src="https://i.pinimg.com/736x/c4/4d/fa/c44dfa3073a1a7278f6dfdba3dc3f930.jpg"
              alt=""
              class="h-full w-full object-cover hover:animate-spin"
            />
          </div>
          <div class="leading-tight">
            <p class="text-sm font-semibold">Lumiko</p>
            <p class="text-[11px] text-zinc-400">
              Estudante de Desenvolvimento de Sistemas
            </p>
          </div>
        </a>

        <!-- Links desktop -->
        <div class="hidden items-center gap-6 text-sm text-zinc-300 md:flex">
          <a href="#Sobre" class="hover:text-zinc-100">Sobre</a>
          <a href="#Projetos" class="hover:text-zinc-100">Projetos</a>
          <a href="#Contact" class="hover:text-zinc-100">Contato</a>
        </div>

        <!-- Bot√£o mobile -->
        <button
          class="inline-flex items-center justify-center rounded-md border border-zinc-800 bg-zinc-900 p-2 text-zinc-100 md:hidden"
          onclick="document.getElementById('mobile-nav').classList.toggle('hidden')"
        >
          <svg
            class="h-5 w-5"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </nav>

      <!-- Menu mobile -->
      <div
        id="mobile-nav"
        class="hidden border-t border-zinc-800 bg-zinc-950 md:hidden"
      >
        <div
          class="mx-auto flex max-w-5xl flex-col gap-1 px-4 py-3 text-sm text-zinc-300"
        >
          <a href="#Sobre" class="rounded-md px-2 py-1 hover:bg-zinc-900"
            >Sobre</a
          >
          <a href="#Projetos" class="rounded-md px-2 py-1 hover:bg-zinc-900"
            >Projetos</a
          >
          <a href="#Blog" class="rounded-md px-2 py-1 hover:bg-zinc-900">Blog</a
          >
        </div>
      </div>
    </header>

    <!-- Inicio -->
    <main class="mx-auto w-full max-w-5xl px-4 py-8 md:px-6 md:py-10">
      <section id="Sobre" class="mb-10">
        <h1 class="text-3xl font-semibold mb-2">Sobre Mim</h1>
        <p class="text-zinc-200">
          <p class="text-zinc-200 display: inline">
            Atualmente tenho
            <span id="age" class="font-semibold"></span> anos.
          </p> sou estudante no SESI e DS (Desenvolvimento de Sistemas) no SENAI.
        </p>
        <break></break>
        <p>Gosto que criar programas, sites e estudar outras linguagens.</p>
      </section>

      <!--  Cartoes -->
      <section id="" class="mt-8 space-y-4 md:space-y-6">
        <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
          <!-- Meu Local -->
          <article
            class="rounded-2xl border border-zinc-800 bg-zinc-900/40 p-6 flex flex-col gap-3"
          >
            <div class="flex items-start justify-between gap-4">
              <div>
                <h1 class="text-xl font-semibold">Meu local</h1>
                <p class="text-xs text-zinc-400">Sumar√©, S√£o Paulo ‚Äî Brasil</p>
              </div>

              <!-- Hor√°rio no canto direito do card -->
              <div class="text-right text-xs text-zinc-300">
                <p id="wt-time" class="font-semibold">--:--:--</p>
                <p class="text-[11px] text-zinc-500">Hora local</p>
              </div>
            </div>

            <!-- Clima -->
            <div class="mt-2 flex items-center gap-3 text-sm">
              <!-- √≠cone -->
              <span id="wt-icon" class="text-2xl">‚òÅÔ∏è</span>

              <!-- texto do clima -->
              <div>
                <p id="wt-temp" class="font-medium">-- ¬∞C</p>
                <p id="wt-desc" class="text-zinc-400 text-xs">
                  Carregando clima...
                </p>
              </div>
            </div>
          </article>

          <!-- Card 2 -->
          <article
            class="rounded-2xl border border-zinc-800 bg-zinc-900/40 p-6"
          >
          </article>

          <!-- Card 3 -->
          <article
            class="rounded-2xl border border-zinc-800 bg-zinc-900/40 p-6"
          >
          </article>

          <article
            class="rounded-2xl border border-zinc-800 bg-zinc-900/40 p-6"
          >
            <!-- outro conte√∫do -->
          </article>
        </div>
      </section>
    </main>
  </body>

  <script>
    document.addEventListener("click", (event) => {
      const menu = document.getElementById("mobile-nav");
      if (!menu) return;

      const target = event.target;
      if (!(target instanceof Element)) return;

      const button = target.closest("button");
      const insideMenu = target.closest("#mobile-nav");

      if (!insideMenu && !button && window.innerWidth < 768) {
        menu.classList.add("hidden");
      }
    });

    // HORA LOCAL
    function updateTime() {
      const now = new Date();
      const opts = { hour: "2-digit", minute: "2-digit", second: "2-digit" };

      const el = document.getElementById("wt-time");
      if (el) {
        el.textContent = now.toLocaleTimeString("pt-BR", {
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit",
        });
      }
    }
    setInterval(updateTime, 1000);
    updateTime();

    // CLIMA (OpenWeatherMap)
    async function loadWeather() {
      const apiKey = "5f4897591afc8a804ecfba16f6b1161a"; // coloque sua key
      const city = "Sumare,BR";
      const url = `https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(
        city
      )}&appid=${apiKey}&units=metric&lang=pt_br`;

      try {
        const res = await fetch(url);
        if (!res.ok) throw new Error("Erro ao buscar clima");
        const data = await res.json();

        const temp = Math.round(data.main.temp);
        const desc = data.weather[0].description;
        const main = data.weather[0].main;

        const tempEl = document.getElementById("wt-temp");
        const descEl = document.getElementById("wt-desc");
        const iconEl = document.getElementById("wt-icon");

        if (tempEl) tempEl.textContent = `${temp} ¬∞C`;
        if (descEl)
          descEl.textContent = desc.charAt(0).toUpperCase() + desc.slice(1);

        if (iconEl) {
          let icon = "‚òÅÔ∏è";
          if (main === "Clear") icon = "‚òÄÔ∏è";
          else if (main === "Rain") icon = "üåßÔ∏è";
          else if (main === "Thunderstorm") icon = "‚õàÔ∏è";
          else if (main === "Snow") icon = "‚ùÑÔ∏è";
          else if (main === "Drizzle") icon = "üå¶Ô∏è";
          else if (main === "Clouds") icon = "‚òÅÔ∏è";
          iconEl.textContent = icon;
        }
      } catch (err) {
        const descEl = document.getElementById("wt-desc");
        if (descEl) descEl.textContent = "N√£o foi poss√≠vel carregar o clima";
        console.error(err);
      }
    }
    function getAge(birthDateString: string): number {
      const today = new Date();
      const birthDate = new Date(birthDateString);

      let age = today.getFullYear() - birthDate.getFullYear();
      const monthDiff = today.getMonth() - birthDate.getMonth();
      const dayDiff = today.getDate() - birthDate.getDate();

      if (monthDiff < 0 || (monthDiff === 0 && dayDiff < 0)) {
        age--;
      }

      return age; // inteiro
    }
    // padr√£o recomendado para calcular idade em JS/TS a partir da data de nascimento.[web:165][web:170]
    loadWeather();
    const ageEl = document.getElementById("age");
    if (ageEl instanceof HTMLElement) {
      ageEl.textContent = String(getAge("2009-04-15")); // coloque sua data real
    }
  </script>
</html>
